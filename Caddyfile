{
    # ถ้าใช้ Cloudflare แบบ Full (Strict) ให้เปิดบรรทัดนี้ เพื่อให้ Caddy ใช้ Self-signed cert ภายใน
    # แต่ Cloudflare จะเห็นว่าเป็น HTTPS ที่ถูกต้อง
    auto_https off
}

# ✅ ถ้า localhost
localhost {
    reverse_proxy app:3000
}

# ✅ ถ้า production domain
savvyapp.cc {
    reverse_proxy app:3000
}

# ✅ www subdomain redirect to main domain
www.savvyapp.cc {
    redir https://savvyapp.cc{uri} permanent
}
